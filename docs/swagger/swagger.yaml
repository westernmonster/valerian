basePath: /api/v1
definitions:
  cloudauth.STSToken:
    properties:
      AccessKeyId:
        description: |-
          OSS AccessKey ID。
          required: true
        type: string
      AccessKeySecret:
        description: OSS AccessKey密钥
        type: string
      BucketName:
        description: OSS bucket，认证服务指定的文件上传 Bucket。
        type: string
      EndPoint:
        description: OSS endpoint
        type: string
      Expiration:
        description: STS token过期时间。
        type: string
      Path:
        description: 一个认证请求生成的用来上传的目录，业务方需要将文件上传到这个目录。
        type: string
      Token:
        description: STS 访问Token。
        type: string
    type: object
  cloudauth.VerifyToken:
    properties:
      DurationSeconds:
        description: 认证会话超时时间，单位为秒。一般为1,800s。
        type: integer
      Token:
        description: 一次认证会话的标识。
        type: string
    type: object
  cloudauth.VerifyTokenData:
    properties:
      CloudauthPageUrl:
        description: 认证流程页面入口URL。
        type: string
      STSToken:
        $ref: '#/definitions/cloudauth.STSToken'
        description: |-
          如果业务方有额外的文件需要一并提交认证服务，可以使用STSToken将其上传到认证服务指定的地方。
          操作方法参考使用STSToken 上传文件示例。STSToken的具体结构描述见STSToken。
        type: object
      VerifyToken:
        $ref: '#/definitions/cloudauth.VerifyToken'
        description: 认证流程页面入口URL。
        type: object
    type: object
  infrastructure.RespCommon:
    properties:
      code:
        description: Code 状态码
        type: integer
      message:
        description: 返回消息
        type: string
      result:
        description: 返回内容，这里是一个接口字段，具体需要查看执行结果
        type: object
      success:
        description: 是否成功
        type: boolean
    type: object
  models.BatchSavedTopicMemberReq:
    properties:
      members:
        description: 成员列表
        items:
          $ref: '#/definitions/models.TopicMemberReq'
        type: array
    type: object
  models.CountryCode:
    properties:
      cn_name:
        description: 国家中文名
        type: string
      code:
        description: 编码
        type: string
      emoji:
        description: 国旗
        type: string
      id:
        description: ID
        type: string
      name:
        description: 国家名
        type: string
      prefix:
        description: |-
          前缀/电话区号
          example: 86
        type: string
    type: object
  models.CreateTopicReq:
    properties:
      allow_chat:
        description: 开启群聊
        type: boolean
      categories:
        description: 话题分类
        items:
          $ref: '#/definitions/models.TopicCategoryParentItem'
        type: array
      category_view_type:
        description: |-
          分类视图
          section 章节
          column 栏目
        type: string
      cover:
        description: |-
          封面图
          必须为URL
        type: string
      edit_permission:
        description: |-
          编辑权限
          auth 认证用户
          auth_join 认证且加入
          auth_join_audit 认证且加入，需审核
          admin 仅管理员
        type: string
      important:
        description: 重要标记
        type: boolean
      introduction:
        description: 简介
        type: string
      is_private:
        description: 是否私密
        type: boolean
      join_permission:
        description: |-
          加入权限
          free  自由加入
          auth_free 认证用户自由加入
          approve 经批准
          auth_approve 认证用户经批准
          admin 仅管理员添加
          purchase 购买
        type: string
      members:
        description: 成员
        items:
          type: '&{%!s(token.Pos=4215) %!s(*ast.StructType=&{4216 0xc000ba95f0 false})}'
        type: array
      mute_notification:
        description: 消息免打扰
        type: boolean
      name:
        description: 名称
        type: string
      related_topics:
        description: 关联话题
        items:
          $ref: '#/definitions/models.RelatedTopicReq'
        type: array
      topic_home:
        description: |-
          话题首页
          introduction 简介
          feed 动态
          catalog 目录
          discussion 讨论
          chat 群聊
        type: string
      topic_set_id:
        description: |-
          集合ID
          如果是一个全新的创建，无需传入这个字段
          在当前话题版本上创建新的版本时候，需要将这个ID传入进来，
          后台方可在内部将不同版本归属于一个集合
        type: integer
      topic_type:
        description: 话题类型
        type: integer
      version_lang:
        description: 版本语言
        type: string
      version_name:
        description: 版本名
        type: string
      view_permission:
        description: |-
          查看权限
          public 公开
          join 加入
        type: string
    type: object
  models.DigitLoginReq:
    properties:
      client_id:
        description: ClientID
        type: string
      mobile:
        description: 手机号码
        type: string
      prefix:
        description: Prefix 国际区号，例如86
        type: string
      source:
        description: Source 来源，1:Web, 2:iOS; 3:Android
        type: integer
      valcode:
        description: 验证码 6位数字
        type: string
    type: object
  models.EmailLoginReq:
    properties:
      client_id:
        description: ClientID OAUTH2 Client ID
        type: string
      email:
        description: Email 邮件地址
        type: string
      password:
        description: Password 密码，长度至少为6位
        type: string
      source:
        description: Source 来源，1:Web, 2:iOS; 3:Android
        type: integer
    type: object
  models.EmailRegisterReq:
    properties:
      email:
        description: 邮件地址
        type: string
      password:
        description: 密码
        type: string
      source:
        description: Source 来源，1:Web, 2:iOS; 3:Android
        type: integer
      valcode:
        description: 验证码 6位数字
        type: string
    type: object
  models.ForgetPasswordReq:
    properties:
      identity:
        type: string
      identity_type:
        description: 标识类型, 1手机, 2邮件
        type: integer
      prefix:
        type: string
      valcode:
        type: string
    type: object
  models.Locale:
    properties:
      id:
        description: ID ID
        type: integer
      locale:
        description: Locale 语言编码
        type: string
      name:
        description: Name 语言名称
        type: string
    type: object
  models.LoginResult:
    properties:
      access_token:
        description: |-
          Access Token， 请在 HTTP 请求头中添加
          例子： Authorization: Bearer  TJVA95OrM7E20RMHrHDcEfxjoYZgeFONFh7HgQ
        type: string
      account_id:
        description: 用户ID
        type: string
      expires_in:
        description: 有效期 秒为单位
        type: integer
      profile:
        $ref: '#/definitions/models.ProfileResp'
        type: object
      refresh_token:
        description: Refresh Token 暂不使用
        type: string
      role:
        description: 用户角色，用于客户端权限管理
        type: string
      scope:
        description: Scope 暂不使用
        type: string
      token_type:
        description: Token 类型，默认为 Bearer
        type: string
    type: object
  models.MobileLoginReq:
    properties:
      client_id:
        description: ClientID
        type: string
      mobile:
        description: Mobile 手机号码
        type: string
      password:
        description: Password 密码
        type: string
      prefix:
        description: Prefix 国际区号，例如86
        type: string
      source:
        description: Source 来源，1:Web, 2:iOS; 3:Android
        type: integer
    type: object
  models.MobileRegisterReq:
    properties:
      mobile:
        description: 手机号码
        type: string
      password:
        description: 密码
        type: string
      prefix:
        description: Prefix 电话号码前缀，例如86
        type: string
      source:
        description: Source 来源，1:Web, 2:iOS; 3:Android
        type: integer
      valcode:
        description: 验证码 6位数字
        type: string
    type: object
  models.PolicyToken:
    properties:
      accessid:
        type: string
      callback:
        type: string
      dir:
        type: string
      expire:
        type: string
      host:
        type: string
      key:
        type: string
      policy:
        type: string
      signature:
        type: string
    type: object
  models.ProfileResp:
    properties:
      avatar:
        description: 头像
        type: string
      birth_day:
        description: 出生日
        type: integer
      birth_month:
        description: 出生月
        type: integer
      birth_year:
        description: 出生年
        type: integer
      created_at:
        description: 注册时间
        type: integer
      email:
        description: 邮件地址
        format: email
        type: string
      gender:
        description: 性别 1为男， 2为女
        type: integer
      id:
        description: ID
        format: int64
        type: string
      introduction:
        description: 自我介绍
        type: string
      ip:
        description: IP 注册IP
        type: string
      location:
        description: 所在地区值
        type: integer
      location_string:
        description: 所在地区名，地区是层级结构，这里将国家、州/省、市、区全部获取出来
        type: string
      mobile:
        description: 手机
        format: mobile
        type: string
      source:
        description: 来源，1:Web, 2:iOS; 3:Android
        type: integer
      updated_at:
        description: 更新时间
        type: integer
      user_name:
        description: 用户名
        format: user_name
        type: string
    type: object
  models.RelatedTopic:
    properties:
      cover:
        description: |-
          封面图
          必须为URL
        type: string
      introduction:
        description: 简介
        type: string
      is_followed:
        description: 是否关注
        type: boolean
      members_count:
        description: 成员数
        type: integer
      name:
        description: 话题名
        type: string
      resources_count:
        description: 资源数量
        type: integer
      topic_id:
        description: 话题ID
        type: string
      type:
        description: |-
          关联类型
          normal 普通关联
          strong 强关联
        type: string
      version_lang:
        description: 版本语言
        type: string
      version_name:
        description: 版本名称
        type: string
    type: object
  models.RelatedTopicReq:
    properties:
      topic_id:
        description: 关联话题ID
        type: integer
      type:
        description: |-
          类型
          normal
          strong
        type: string
    type: object
  models.RelatedTopicShort:
    properties:
      name:
        description: 话题名
        type: string
      topic_id:
        description: 话题ID
        type: string
      type:
        description: |-
          关联类型
          normal 普通关联
          strong 强关联
        type: string
      version_lang:
        description: 版本语言
        type: string
      version_name:
        description: 版本名称
        type: string
    type: object
  models.RequestEmailValcodeReq:
    properties:
      code_type:
        description: 验证码类型, 1为注册验证码, 2为重置密码验证码
        type: integer
      email:
        description: 邮件地址
        type: string
    type: object
  models.RequestMobileValcodeReq:
    properties:
      code_type:
        description: 验证码类型, 1为注册验证码, 2为重置密码验证码, 3为登录验证码
        type: integer
      mobile:
        description: 手机号码
        type: string
      prefix:
        description: Prefix 电话号码前缀，例如86
        type: string
    type: object
  models.RequestOSSTokenReq:
    properties:
      file_name:
        description: 文件名
        type: string
      file_type:
        description: |-
          文件类型
          file: 文章附件
          image: 图片
          certification: 工作证件照片
          other: 其他
        type: string
    type: object
  models.ResetPasswordReq:
    properties:
      password:
        type: string
      session_id:
        type: string
    type: object
  models.SaveTopicCategoriesReq:
    properties:
      items:
        description: |-
          话题分类
          required: true
        items:
          $ref: '#/definitions/models.TopicCategoryParentItem'
        type: array
      topic_id:
        description: |-
          话题ID
          required: true
        type: string
    type: object
  models.Topic:
    properties:
      allow_chat:
        description: 开启群聊
        type: boolean
      categories:
        description: 话题分类
        items:
          $ref: '#/definitions/models.TopicCategoryParentItem'
        type: array
      category_view_type:
        description: |-
          分类视图
          section 章节
          column 栏目
        type: string
      cover:
        description: |-
          封面图
          必须为URL
        type: string
      created_at:
        type: integer
      edit_permission:
        description: |-
          编辑权限
          auth 认证用户
          auth_join 认证且加入
          auth_join_audit 认证且加入，需审核
          admin 仅管理员
        type: string
      id:
        type: string
      important:
        description: 重要标记
        type: boolean
      introduction:
        description: 简介
        type: string
      is_followed:
        description: 是否关注
        type: boolean
      is_private:
        description: 是否私密
        type: boolean
      join_permission:
        description: |-
          加入权限
          free  自由加入
          auth_free 认证用户自由加入
          approve 经批准
          auth_approve 认证用户经批准
          admin 仅管理员添加
          purchase 购买
        type: string
      members:
        description: 成员
        items:
          $ref: '#/definitions/models.TopicMember'
        type: array
      mute_notification:
        description: 消息免打扰
        type: boolean
      name:
        description: 名称
        type: string
      related_topics:
        description: 关联话题
        items:
          $ref: '#/definitions/models.RelatedTopicShort'
        type: array
      topic_home:
        description: |-
          话题首页
          introduction 简介
          feed 动态
          catalog 目录
          discussion 讨论
          chat 群聊
        type: string
      topic_set_id:
        description: 集合ID
        type: string
      topic_type:
        description: 话题类型
        type: integer
      topic_type_name:
        type: string
      version_lang:
        description: 版本语言
        type: string
      version_name:
        description: 版本名
        type: string
      view_permission:
        description: |-
          查看权限
          public 公开
          join 加入
        type: string
    type: object
  models.TopicCategoriesResp:
    properties:
      items:
        description: 话题分类
        items:
          $ref: '#/definitions/models.TopicCategoryParentItem'
        type: array
      topic_id:
        description: 话题ID
        type: string
    type: object
  models.TopicCategory:
    properties:
      created_at:
        type: integer
      created_by:
        type: integer
      id:
        type: integer
      name:
        type: string
      parent_id:
        type: integer
      seq:
        type: integer
      topic_id:
        type: integer
      updated_at:
        type: integer
    type: object
  models.TopicCategoryChildItem:
    properties:
      id:
        type: string
      name:
        description: |-
          分类名
          required: true
        type: string
      seq:
        description: |-
          顺序
          required: true
        type: integer
    type: object
  models.TopicCategoryParentItem:
    properties:
      children:
        items:
          $ref: '#/definitions/models.TopicCategoryChildItem'
        type: array
      id:
        type: string
      name:
        description: |-
          分类名
          required: true
        type: string
      seq:
        description: |-
          顺序
          required: true
        type: integer
    type: object
  models.TopicFollower:
    properties:
      is_followed:
        description: 是否关注
        type: boolean
      topic_id:
        description: 话题ID
        type: string
    type: object
  models.TopicMember:
    properties:
      account_id:
        description: 账户ID
        type: string
      avatar:
        description: 头像
        type: string
      role:
        description: |-
          成员角色
          user 普通用户
          admin 管理员
        type: string
      user_name:
        description: 用户名
        type: string
    type: object
  models.TopicMemberReq:
    properties:
      account_id:
        description: 成员ID
        type: integer
      opt:
        description: |-
          操作
          C U D
        type: string
      role:
        description: |-
          角色
          user 普通用户
          admin 管理员
        type: string
    type: object
  models.TopicMembersPagedResp:
    properties:
      count:
        type: integer
      data:
        items:
          $ref: '#/definitions/models.TopicMember'
        type: array
      page_size:
        type: integer
    type: object
  models.TopicVersion:
    properties:
      topic_id:
        description: 话题ID
        type: string
      topic_set_id:
        description: 集合ID
        type: string
      version_lang:
        description: 版本语言
        type: string
      version_name:
        description: 版本名称
        type: string
    type: object
  models.UpdateProfileReq:
    properties:
      avatar:
        description: |-
          用户头像
          如果无需更改该字段，在提交JSON请求中请不要包含该字段
        type: string
      birth_day:
        description: 出生日
        type: integer
      birth_month:
        description: 出生月
        type: integer
      birth_year:
        description: |-
          出生年
          如果无需更改该字段，在提交JSON请求中请不要包含该字段
        type: integer
      gener:
        description: |-
          用户性别， 1 为男，2 为女
          如果无需更改该字段，在提交JSON请求中请不要包含该字段
        type: integer
      introduction:
        description: |-
          个性签名
          如果无需更改该字段，在提交JSON请求中请不要包含该字段
        type: string
      location:
        description: |-
          地区
          如果无需更改该字段，在提交JSON请求中请不要包含该字段
        type: string
      password:
        description: |-
          密码
          如果无需更改该字段，在提交JSON请求中请不要包含该字段
        type: string
    type: object
  models.UpdateTopicReq:
    properties:
      allow_chat:
        description: 开启群聊
        type: boolean
      categories:
        description: 话题分类
        items:
          $ref: '#/definitions/models.TopicCategoryParentItem'
        type: array
      category_view_type:
        description: |-
          分类视图
          section 章节
          column 栏目
        type: string
      cover:
        description: |-
          封面图
          必须为URL
        type: string
      edit_permission:
        description: |-
          编辑权限
          auth 认证用户
          auth_join 认证且加入
          auth_join_audit 认证且加入，需审核
          admin 仅管理员
        type: string
      important:
        description: 重要标记
        type: boolean
      introduction:
        description: 简介
        type: string
      is_private:
        description: 是否私密
        type: boolean
      join_permission:
        description: |-
          加入权限
          free  自由加入
          auth_free 认证用户自由加入
          approve 经批准
          auth_approve 认证用户经批准
          admin 仅管理员添加
          purchase 购买
        type: string
      members:
        description: 成员
        items:
          type: '&{%!s(token.Pos=9532) %!s(*ast.StructType=&{9533 0xc000bc6900 false})}'
        type: array
      mute_notification:
        description: 消息免打扰
        type: boolean
      name:
        description: 名称
        type: string
      related_topics:
        description: 关联话题
        items:
          $ref: '#/definitions/models.RelatedTopicReq'
        type: array
      topic_home:
        description: |-
          话题首页
          introduction 简介
          feed 动态
          catalog 目录
          discussion 讨论
          chat 群聊
        type: string
      topic_type:
        description: 话题类型
        type: integer
      version_lang:
        description: 版本语言
        type: string
      version_name:
        description: 版本名
        type: string
      view_permission:
        description: |-
          查看权限
          public 公开
          join 加入
        type: string
    type: object
host: dev.flywk.com
info:
  contact: {}
  description: |+
    飞行百科 API
    所有返回结果以如下JSON对象返回
    <pre>
    {
    "code": 0,           // 如果没有另行约定，一般为200
    "message": "string", // 一般用户发生错误或者验证失败时候返回的消息
    "result": {},        // 返回结果，所有文档所示的返回结果处于这个字段
    "success": true      // 用于判断是否执行成功
    }
    </pre>

  license: {}
  title: 飞行百科 API
  version: "1.0"
paths:
  /country_codes:
    get:
      consumes:
      - application/json
      description: 获取电话国家区号
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 国家区号
          schema:
            items:
              $ref: '#/definitions/models.CountryCode'
            type: array
        "500":
          description: 服务器端错误
      summary: 获取电话国家区号
      tags:
      - common
  /files/oss_token:
    post:
      consumes:
      - application/json
      description: |-
        获取阿里云OSS上传TOKEN
        阿里云文档：https://help.aliyun.com/document_detail/31926.html
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.RequestOSSTokenReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: Token
          schema:
            $ref: '#/definitions/models.PolicyToken'
            type: object
        "400":
          description: 验证失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取阿里云OSS上传TOKEN
      tags:
      - common
  /locales:
    get:
      consumes:
      - application/json
      description: 语言编码
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 语言编码
          schema:
            items:
              $ref: '#/definitions/models.Locale'
            type: array
        "500":
          description: 服务器端错误
      summary: 语言编码
      tags:
      - common
  /me:
    get:
      consumes:
      - application/json
      description: 获取当前用户资料，需要登录验证 （JWT Token 或 Cookie）
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 用户资料
          schema:
            $ref: '#/definitions/models.ProfileResp'
            type: object
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取当前用户资料
      tags:
      - account
    put:
      consumes:
      - application/json
      description: 更改用户资料，需要登录验证 （JWT Token 或 Cookie）
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.UpdateProfileReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 更改用户资料
      tags:
      - account
  /me/certification/idcard:
    post:
      consumes:
      - application/json
      description: 获取实名认证Token
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Token
          schema:
            $ref: '#/definitions/cloudauth.VerifyTokenData'
            type: object
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取实名认证Token
      tags:
      - account
  /me/certification/idcard/status:
    get:
      consumes:
      - application/json
      description: 获取实名认证状态
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 返回实名认证状态
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取实名认证状态
      tags:
      - account
  /me/followed/topics:
    post:
      consumes:
      - application/json
      description: 关注/取关话题
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.TopicFollower'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 关注/取关话题
      tags:
      - account
  /me/password:
    put:
      consumes:
      - application/json
      description: 更改密码，需要登录验证 （JWT Token 或 Cookie）
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.UpdateProfileReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 更改密码
      tags:
      - account
  /oauth/login/digit:
    post:
      consumes:
      - application/json
      description: 验证码登录
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 手机登录
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.DigitLoginReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/models.LoginResult'
            type: object
        "400":
          description: 验证失败
        "500":
          description: 服务器端错误
      summary: 验证码登录
      tags:
      - auth
  /oauth/login/email:
    post:
      consumes:
      - application/json
      description: 用户邮件登录
      parameters:
      - description: 来源
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 用户登录
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.EmailLoginReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/models.LoginResult'
            type: object
        "400":
          description: 验证失败
        "500":
          description: 服务器端错误
      summary: 用户邮件登录
      tags:
      - auth
  /oauth/login/mobile:
    post:
      consumes:
      - application/json
      description: 用户手机登录
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 手机登录
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.MobileLoginReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/models.LoginResult'
            type: object
        "400":
          description: 验证失败
        "500":
          description: 服务器端错误
      summary: 用户手机登录
      tags:
      - auth
  /oauth/logout:
    post:
      consumes:
      - application/json
      description: 退出登录
      parameters:
      - description: 来源
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证失败
        "500":
          description: 服务器端错误
      summary: 退出登录
      tags:
      - auth
  /oauth/password/reset:
    put:
      consumes:
      - application/json
      description: 忘记密码，此为重设密码第一步，提交用户标识（手机号、邮箱），和用户输入的验证码进行验证，并返回一个 Session ID
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.ForgetPasswordReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/infrastructure.RespCommon'
            type: object
        "400":
          description: 验证失败
          schema:
            $ref: '#/definitions/infrastructure.RespCommon'
            type: object
        "500":
          description: 服务器端错误
          schema:
            $ref: '#/definitions/infrastructure.RespCommon'
            type: object
      summary: 忘记密码
      tags:
      - auth
  /oauth/password/reset/confirm:
    put:
      consumes:
      - application/json
      description: 重设密码第二步，传入新密码和Session ID，如果返回的Code值为307，则表示Session已经失效，前端可以根据这个值做对应的处理
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.ResetPasswordReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/infrastructure.RespCommon'
            type: object
        "400":
          description: 验证失败
          schema:
            $ref: '#/definitions/infrastructure.RespCommon'
            type: object
        "500":
          description: 服务器端错误
          schema:
            $ref: '#/definitions/infrastructure.RespCommon'
            type: object
      summary: 重设密码
      tags:
      - auth
  /oauth/registration/email:
    post:
      consumes:
      - application/json
      description: 用户邮件注册
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.EmailRegisterReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/models.LoginResult'
            type: object
        "400":
          description: 验证失败
        "500":
          description: 服务器端错误
      summary: 用户邮件注册
      tags:
      - auth
  /oauth/registration/mobile:
    post:
      consumes:
      - application/json
      description: 用户手机注册
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.MobileRegisterReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/models.LoginResult'
            type: object
        "400":
          description: 验证失败
        "500":
          description: 服务器端错误
      summary: 用户手机注册
      tags:
      - auth
  /topic_sets/{id}/versions:
    get:
      consumes:
      - application/json
      description: 获取话题版本
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 话题集合ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 话题成员
          schema:
            items:
              $ref: '#/definitions/models.TopicVersion'
            type: array
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取话题版本
      tags:
      - topic
  /topics:
    get:
      consumes:
      - application/json
      description: 搜索话题
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 查询条件
        in: query
        name: q
        required: true
        type: string
      - description: 排除的话题ID
        in: query
        name: from_topic_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功,返回topic_id
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 搜索话题
      tags:
      - topic
    post:
      consumes:
      - application/json
      description: 新增话题
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.CreateTopicReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功,返回topic_id
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 新增话题
      tags:
      - topic
  /topics/{id}:
    delete:
      consumes:
      - application/json
      description: 删除话题
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 删除话题
      tags:
      - topic
    get:
      consumes:
      - application/json
      description: 获取话题
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 话题
          schema:
            $ref: '#/definitions/models.Topic'
            type: object
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取话题
      tags:
      - topic
    put:
      consumes:
      - application/json
      description: 更新话题
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.UpdateTopicReq'
          type: object
      - description: ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 更新话题
      tags:
      - topic
  /topics/{id}/categories:
    get:
      consumes:
      - application/json
      description: 获取分类列表
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 话题ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 分类
          schema:
            items:
              $ref: '#/definitions/models.TopicCategory'
            type: array
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取分类列表
      tags:
      - topic
    patch:
      consumes:
      - application/json
      description: 批量新增/更改话题分类
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.SaveTopicCategoriesReq'
          type: object
      - description: 话题ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 批量新增/更改话题分类
      tags:
      - topic
  /topics/{id}/categories/hierarchy:
    get:
      consumes:
      - application/json
      description: 按层级结构获取分类
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 话题ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 层级分类
          schema:
            $ref: '#/definitions/models.TopicCategoriesResp'
            type: object
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 按层级结构获取分类
      tags:
      - topic
  /topics/{id}/members:
    get:
      consumes:
      - application/json
      description: 获取成员列表
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 话题ID
        in: path
        name: id
        required: true
        type: string
      - description: 页码
        in: query
        name: page
        required: true
        type: integer
      - description: 每页大小
        in: query
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 话题成员
          schema:
            $ref: '#/definitions/models.TopicMembersPagedResp'
            type: object
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取成员列表
      tags:
      - topic
    patch:
      consumes:
      - application/json
      description: 批量更新话题成员
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.BatchSavedTopicMemberReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证请求失败
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 批量更新话题成员
      tags:
      - topic
  /topics/{id}/related:
    get:
      consumes:
      - application/json
      description: 获取关联话题
      parameters:
      - description: Bearer
        in: header
        name: Authorization
        required: true
        type: string
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 话题ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 话题成员
          schema:
            items:
              $ref: '#/definitions/models.RelatedTopic'
            type: array
        "401":
          description: 登录验证失败
        "500":
          description: 服务器端错误
      summary: 获取关联话题
      tags:
      - topic
  /valcodes/email:
    post:
      consumes:
      - application/json
      description: 请求邮件验证码
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.RequestEmailValcodeReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证请求失败
        "500":
          description: 服务器端错误
      summary: 请求邮件验证码
      tags:
      - common
  /valcodes/mobile:
    post:
      consumes:
      - application/json
      description: 请求短信验证码
      parameters:
      - description: Source 来源，1:Web, 2:iOS; 3:Android
        enum:
        - 1
        - 2
        - 3
        in: header
        name: Source
        required: true
        type: integer
      - description: 语言
        enum:
        - zh-CN
        - en-US
        in: header
        name: Locale
        required: true
        type: string
      - description: 请求
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/models.RequestMobileValcodeReq'
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功
        "400":
          description: 验证请求失败
        "500":
          description: 服务器端错误
      summary: 请求短信验证码
      tags:
      - common
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
