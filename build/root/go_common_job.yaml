branch-protection: {}
deck:
  rerun_auth_config: {}
  spyglass: {}
gerrit: {}
github:
  LinkURL: null
github_reporter: {}
owners_dir_blacklist:
  default: null
  repos: null
plank: {}
presubmits:
  platform/valerian:
  - agent: kubernetes
    always_run: true
    cluster: default
    context: tool-mkprow-bazel-build
    name: tool-mkprow-bazel-build
    namespace: default
    rerun_command: +test tool-mkprow-bazel-build
    spec:
      containers:
      - args:
        - --id=$(BUILD_ID)
        - --job=$(JOB_NAME)
        - --root=/root/go/src
        - --repo=code.aliyun.com/$(REPO_OWNER)/$(REPO_NAME)=$(PULL_REFS)
        - --command
        - make
        - bazel-build
        - WHAT=app/tool/mkprow
        image: l.gcr.io/google/bazel:latest
        imagePullPolicy: IfNotPresent
        name: tool-mkprow-bazel-build
        resources: {}
    trigger: (?m)^\+test( | .* )tool-mkprow-bazel-build,?($|\s.*)
  - agent: kubernetes
    always_run: true
    cluster: default
    context: tool-mkprow-bazel-test
    name: tool-mkprow-bazel-test
    namespace: default
    optional: true
    rerun_command: +test tool-mkprow-bazel-test
    spec:
      containers:
      - args:
        - --id=$(BUILD_ID)
        - --job=$(JOB_NAME)
        - --root=/root/go/src
        - --repo=code.aliyun.com/$(REPO_OWNER)/$(REPO_NAME)=$(PULL_REFS)
        - --command
        - ./build/unit_test.sh
        - app/tool/mkprow
        image: l.gcr.io/google/bazel:latest
        imagePullPolicy: IfNotPresent
        name: tool-mkprow-bazel-test
        resources: {}
    trigger: (?m)^\+test( | .* )tool-mkprow-bazel-test,?($|\s.*)
  - agent: kubernetes
    always_run: true
    cluster: default
    context: tool-mkprow-lint
    name: tool-mkprow-lint
    namespace: default
    optional: true
    rerun_command: +test tool-mkprow-lint
    spec:
      containers:
      - args:
        - --id=$(BUILD_ID)
        - --job=$(JOB_NAME)
        - --root=/root/go/src
        - --repo=code.aliyun.com/$(REPO_OWNER)/$(REPO_NAME)=$(PULL_REFS)
        - --command
        - ./build/verify-lint.sh
        - ./app/tool/mkprow/...
        image: cytopia/golint:latest
        imagePullPolicy: IfNotPresent
        name: tool-mkprow-lint
        resources: {}
    trigger: (?m)^\+test( | .* )tool-mkprow-lint,?($|\s.*)
  - agent: kubernetes
    always_run: true
    cluster: default
    context: valerian-make-update
    name: valerian-make-update
    namespace: default
    rerun_command: +test valerian-make-update
    spec:
      containers:
      - args:
        - --id=$(BUILD_ID)
        - --job=$(JOB_NAME)
        - --root=/root/go/src
        - --repo=code.aliyun.com/$(REPO_OWNER)/$(REPO_NAME)=$(PULL_REFS)
        - --command
        - ./build/update-bazel.sh
        image: cytopia/golint:latest
        imagePullPolicy: IfNotPresent
        name: valerian-make-update
        resources: {}
    trigger: (?m)^\+test( | .* )valerian-make-update,?($|\s.*)
push_gateway:
  serve_metrics: false
sinker: {}
tide:
  context_options:
    required-if-present-contexts: null
